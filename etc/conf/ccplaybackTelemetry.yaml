# Configuration file for the ComCam

# The name of the HeaderService
hs_name: CCHeaderService
instrument: ComCam
# Vendor names come from a CCCamera Event, this is in case it does not
vendor_names: ['ITL','ITL','ITL','ITL','ITL','ITL','ITL','ITL','ITL','ITL']
section: ComCam
segname: Segment

# Default logging level
loglevel: 'INFO'

# Path to the log location and other log definitions
logfile: 'www/CCHeaderService.log'
log_format: '[%(asctime)s.%(msecs)03d][%(levelname)s][%(name)s][%(funcName)s] %(message)s'
log_format_date: '%Y-%m-%d %H:%M:%S'

# path to the web server logfile
weblogfile: 'www/webserver.log'

# port_number for webserver
port_number: 8000

# The URL format to be used for lfa_mode=http
url_format: "http://{ip_address}:{port_number}/{filename_HDR}"

# While we support both s3 and http LFA we need to define the mode [s3 or http]
lfa_mode: http

# The s3 instance (i.e.: nts, tuc, ls, cp)
# s3instance: nts

# Default write_mode (fits or string)
write_mode: yaml

# The event to get the timeout
timeout_event:
    device: CCCamera
    topic: startIntegration
    value: timeout

# Timeout beyond the requested exposure time to wait for an end of Telemetry event (in seconds)
timeout_exptime: 30

# Playback Mode
playback: True

# The file naming event source and definitions
filepath: 'www/DMHS_filerepo'
format_HDR: "{}.yaml"
format_FITS: "{}.fits"
imageName_event:
    device: CCCamera
    topic: startIntegration
    value: imageName

# The Events that we use to define where we collect
start_collection_event:
    device: CCCamera
    topic: startIntegration

end_collection_event:
    device: CCCamera
    topic: endOfImageTelemetry

# The event for the image readout paramters
imageParam_event:
    device: CCCamera
    topic: imageReadoutParameters
    array_keys: ccdLocation

# The event for the camera vendor and CCD names configuration
cameraConf_event:
    device: CCCamera
    topic: focalPlaneSummaryInfo
    value: ccdManufacturer
    array_keys: ccdLocation

# Telemetry values for images meta-data
# https://confluence.lsstcorp.org/display/SYSENG/ComCam+Header+Information+Topic+Mapping
telemetry:

# We only need one value to trigger collection
 EMUIMAGE:
  device: CCCamera
  Stype: Event
  topic: endOfImageTelemetry
  value: emulatedImage
  collect_after_event: end_collection_event


# --- Keywords from playback ---------------
playback_keywords:
# --- Telescope information ---------
 - OBJECT
 - RA
 - DEC
 - ROTPA
 - RASTART
 - DECSTART
 - HASTART
 - AMSTART
 - ELSTART
 - AZSTART
 - RAEND
 - DECEND
 - HAEND
 - AMEND
 - ELEND
 - AZEND
 - FOCUSZ
 - TRACKSYS
 - RADESYS
# ---- Weather information -----------------------------
 - AIRTEMP
 - PRESSURE
 - HUMIDITY
 - WINDSPD
 - WINDDIR
 - SEEING
# ------- Hierarch keywords --------
 - HIERARCH SIMULATE MTMOUNT
 - HIERARCH SIMULATE MTM1M3
 - HIERARCH SIMULATE MTM2
 - HIERARCH SIMULATE CAMHEXAPOD
 - HIERARCH SIMULATE M2HEXAPOD
 - HIERARCH SIMULATE MTROTATOR
 - HIERARCH SIMULATE MTDOME
 - HIERARCH SIMULATE MTDOMETRAJECTORY
